/*! Fluffy.js v2.1.1 | (c) 2016 Sebastian Prein | http://mzdr.github.io/fluffy.js/ */
!function(t,e){if("function"==typeof define&&define.amd)define("Fluffy",e);else if("object"==typeof module&&module.exports)module.exports=e();else switch(t.Fluffy=e(),document.readyState){case"loading":case"interactive":document.onreadystatechange=function(){"complete"==document.readyState&&t.Fluffy.detect()};break;case"complete":t.Fluffy.detect()}}(this,function(){"use strict";function t(t,e){return e="undefined"!=typeof e?e:"debug",!window.console||!console[e]||(console[e].call(window.console,t),!0)}function e(){var t;window.addEventListener("resize",function(e){t&&clearTimeout(t),t=setTimeout(function(){for(var t=0;t<m.length;t++)m[t].updateContentSize(),m[t].updateContentPosition()},100)})}function i(e){this.container=null,this.content=null,this.items=null,this.trigger=null,this.scrollbars={},this.mouse={real:{x:0,y:0},fake:{x:0,y:0},last:{x:0,y:0},observer:null},this.ratios={},this.settings={},this.sizes={},this.cleanContent=function(){for(var t=0;t<this.items.length;t++){var e=this.items[t],i=e.nextSibling,s=e.previousSibling,n=e.parentNode;null!==e&&3===e.nodeType&&n.removeChild(e),null!==s&&3===s.nodeType&&n.removeChild(s),null!==i&&3===i.nodeType&&n.removeChild(i)}},this.prepare=function(){this.cleanContent(),this.attachScrollbars(),this.mouse.observer=new s(this),this.container.style.overflow="hidden",a&&(this.container.style.webkitOverflowScrolling="touch",this.container.style.overflowX=this.settings.triggerDirection.indexOf("x")>=0?"scroll":"hidden",this.container.style.overflowY=this.settings.triggerDirection.indexOf("y")>=0?"scroll":"hidden")},this.attachScrollbars=function(){if(this.settings.showScrollbars){var t=[];this.settings.triggerDirection.indexOf("x")>=0&&t.push("horizontal"),this.settings.triggerDirection.indexOf("y")>=0&&t.push("vertical");var e=document.createElement("div");e.setAttribute("data-fluffy-scrollbars","");for(var i=0;i<t.length;i++){var s=document.createElement("span");s.classList.add("is-"+t[i]),e.appendChild(s),this.scrollbars[t[i]]=s}this.container.appendChild(e),this.container.classList.add("has-scrollbar")}},this.getContainerWidth=function(){return this.container.getBoundingClientRect().width},this.getContainerHeight=function(){return this.container.getBoundingClientRect().height},this.getTriggerWidth=function(){return this.trigger.getBoundingClientRect().width},this.getTriggerHeight=function(){return this.trigger.getBoundingClientRect().height},this.getContentWidth=function(){for(var t=0,e=0;t<this.items.length;t++)e+=this.items[t].getBoundingClientRect().width;return e},this.getContentHeight=function(){for(var t=0,e=0;t<this.items.length;t++)e+=this.items[t].getBoundingClientRect().height;return e},this.getSmartWidth=function(){for(var t={smallest:null,largest:0,average:0},e=0;e<this.items.length;e++){var i="naturalWidth"in this.items[e]?this.items[e].naturalWidth:this.items[e].getBoundingClientRect().width;t.average+=i,i>t.largest&&(t.largest=i),(null===t.smallest||i<t.smallest)&&(t.smallest=i)}return t.average/=this.items.length,t},this.getSmartHeight=function(){for(var t={smallest:null,largest:0,average:0},e=0;e<this.items.length;e++){var i="naturalHeight"in this.items[e]?this.items[e].naturalHeight:this.items[e].getBoundingClientRect().height;t.average+=i,i>t.largest&&(t.largest=i),(null===t.smallest||i<t.smallest)&&(t.smallest=i)}return t.average/=this.items.length,t},this.getScrollableHeight=function(){return this.getContentHeight()-this.getContainerHeight()},this.getScrollableWidth=function(){return this.getContentWidth()-this.getContainerWidth()},this.getMousePosition=function(t){t=t||window.event;var e=this.trigger.currentStyle||window.getComputedStyle(this.trigger,null),i=this.trigger.getBoundingClientRect(),s={left:0|e.borderLeftWidth,right:0|e.borderRightWidth,top:0|e.borderTopWidth,bottom:0|e.borderBottomWidth},n={left:i.left+s.left,right:s.left+s.right,bottom:s.top+s.bottom,top:i.top+s.top};return{x:Math.min(Math.max(0,t.clientX-n.left),i.width-n.right),y:Math.min(Math.max(0,t.clientY-n.top),i.height-n.bottom)}},this.getFakeMousePosition=function(){return{x:Math.min(Math.max(0,this.mouse.real.x-this.settings.mousePadding),this.sizes.moveArea.width)*this.ratios.moveAreaToContent.width,y:Math.min(Math.max(0,this.mouse.real.y-this.settings.mousePadding),this.sizes.moveArea.height)*this.ratios.moveAreaToContent.height}},this.cacheSizes=function(){this.sizes={container:{width:this.getContainerWidth(),height:this.getContainerHeight()},content:{width:this.getContentWidth(),height:this.getContentHeight()},scrollable:{width:this.getScrollableWidth(),height:this.getScrollableHeight()},trigger:{width:this.getTriggerWidth(),height:this.getTriggerHeight()},moveArea:{width:this.getTriggerWidth()-2*this.settings.mousePadding,height:this.getTriggerHeight()-2*this.settings.mousePadding},scrollbars:{horizontal:this.settings.showScrollbars&&this.scrollbars.horizontal?this.scrollbars.horizontal.getBoundingClientRect():null,vertical:this.settings.showScrollbars&&this.scrollbars.vertical?this.scrollbars.vertical.getBoundingClientRect():null}}},this.updateContentSize=function(){this.settings.smartWidth&&c.indexOf(this.settings.smartWidth)>=0&&(this.content.style.width=this.getSmartWidth()[this.settings.smartWidth]+"px"),this.settings.smartHeight&&c.indexOf(this.settings.smartHeight)>=0&&(this.content.style.height=this.getSmartHeight()[this.settings.smartHeight]+"px"),this.cacheSizes(),this.defineRatios(),this.settings.triggerDirection.indexOf("x")>=0&&(this.content.style.width=(100*this.ratios.containerToContent.width+.001).toFixed(g)+"%"),this.settings.triggerDirection.indexOf("y")>=0&&(this.content.style.height=(100*this.ratios.containerToContent.height+.001).toFixed(g)+"%"),u.x===window.innerWidth&&u.y===window.innerHeight||(this.mouse.real={x:this.mouse.real.x*(window.innerWidth/u.x),y:this.mouse.real.y*(window.innerHeight/u.y)},u={x:window.innerWidth,y:window.innerHeight},this.mouse.fake=this.getFakeMousePosition())},this.updateContentPosition=function(){var t=0,e=0;this.settings.triggerDirection.indexOf("x")>=0&&(t=(this.mouse.last.x/this.sizes.scrollable.width*this.ratios.contentToScrollableArea.width*100).toFixed(g)),this.settings.triggerDirection.indexOf("y")>=0&&(e=(this.mouse.last.y/this.sizes.scrollable.height*this.ratios.contentToScrollableArea.height*100).toFixed(g)),this.content.style[l]="translate(-"+t+"%, -"+e+"%)"},this.updateScrollbarPosition=function(){this.settings.showScrollbars&&(this.settings.triggerDirection.indexOf("x")>=0&&(this.scrollbars.horizontal.style.left=(this.mouse.last.x/this.sizes.scrollable.width*this.ratios.containerToScrollbarArea.width*100).toFixed(g)+"%"),this.settings.triggerDirection.indexOf("y")>=0&&(this.scrollbars.vertical.style.top=(this.mouse.last.y/this.sizes.scrollable.height*this.ratios.containerToScrollbarArea.height*100).toFixed(g)+"%"))},this.defineRatios=function(){this.ratios.moveAreaToContent={width:this.sizes.scrollable.width/this.sizes.moveArea.width,height:this.sizes.scrollable.height/this.sizes.moveArea.height},this.ratios.contentToScrollableArea={width:this.sizes.scrollable.width/this.sizes.content.width,height:this.sizes.scrollable.height/this.sizes.content.height},this.ratios.containerToContent={width:this.sizes.content.width/this.sizes.container.width,height:this.sizes.content.height/this.sizes.container.height},this.ratios.containerToScrollbarArea={width:this.sizes.scrollbars.horizontal?(this.sizes.container.width-this.sizes.scrollbars.horizontal.width)/this.sizes.container.width:0,height:this.sizes.scrollbars.vertical?(this.sizes.container.height-this.sizes.scrollbars.vertical.height)/this.sizes.container.height:0}},this.registerEventListeners=function(){this.container&&this.container.classList.add("is-ready"),this.updateContentSize(),a||this.trigger.addEventListener("mousemove",function(t){this.mouse.observer.status()===!1&&this.mouse.observer.start(),this.mouse.real=this.getMousePosition(t),this.mouse.fake=this.getFakeMousePosition()}.bind(this))},function(){var i=e.querySelector("[data-fluffy-content]");if(null===i)return t(e,"warn"),void t("↳ Has no [data-fluffy-content] element and therefore will be ignored.","warn");var s={};if(e.hasAttribute("data-fluffy-options")){try{var n=JSON.parse(e.getAttribute("data-fluffy-options"));"object"!=typeof n?(t(e,"warn"),t("↳ Fluffy options need to be of type object. Skipping for container above. Using defaults instead.","warn")):s=n}catch(i){t(e,"warn"),t("↳ Trying to parse options for container above has failed. Using defaults instead.","warn")}"mousePadding"in s&&s.mousePadding<0&&(s.mousePadding=d.mousePadding),"mouseDamp"in s&&s.mouseDamp<=0&&(s.mouseDamp=d.mouseDamp)}for(var r in d)r in s||(s[r]=d[r]);if(this.container=e,this.content=i,this.items=i.childNodes,this.settings=s,this.trigger=e,s.triggerSelector){var o=document.querySelector(s.triggerSelector);null!==o&&(this.trigger=o)}switch(this.prepare(),document.readyState){case"loading":case"interactive":document.onreadystatechange=function(){"complete"==document.readyState&&this.registerEventListeners()}.bind(this);break;case"complete":this.registerEventListeners()}}.call(this)}function s(t){function e(t,e){function i(){n.value=window.requestAnimationFrame(i);var r=Date.now(),o=r-s;o>=e&&(t.call(),s=Date.now())}var s=Date.now(),n={};return n.value=window.requestAnimationFrame(i),n}function s(t){window.cancelAnimationFrame(t.value)}if(t instanceof i==!1)throw Error("MouseObserver expects first parameter to be an instance of FluffyObject. Instead "+t.constructor.name+" was given.");this.start=function(){t.container.classList.add("is-moving"),this.id=e(function(){var e={x:(t.mouse.fake.x-t.mouse.last.x)/t.settings.mouseDamp,y:(t.mouse.fake.y-t.mouse.last.y)/t.settings.mouseDamp};Math.abs(e.x)<.001&&Math.abs(e.y)<.001&&(this.stop(),t.container.classList.remove("is-moving")),t.mouse.last.x+=e.x,t.mouse.last.y+=e.y,t.updateContentPosition(),t.updateScrollbarPosition()}.bind(this),10)},this.stop=function(){this.id=s(this.id)},this.status=function(){return"object"==typeof this.id}}function n(t){var e=t;if("string"==typeof t&&(e=document.querySelector(t)),null!==e){for(var s=0;s<m.length;s++)if(m[s].container===e)return;m.push(new i(e))}}function r(){var t=document.querySelectorAll("[data-fluffy-container]");if(0!==t.length)for(var e=0;e<t.length;e++)n(t[e])}var o="2.1.1",h=!!document.querySelector&&!!window.addEventListener&&!!window.requestAnimationFrame,a="ontouchstart"in window,l="transform",c=["smallest","average","largest"],g=3,d={triggerSelector:null,showScrollbars:!0,smartHeight:!1,smartWidth:!1,triggerDirection:"x",mouseDamp:20,mousePadding:60},u={x:window.innerWidth,y:window.innerHeight},m=[];return function(){if(!h)throw Error("Browser is lacking support for several requirements like: 'querySelector', 'addEventListener' or 'requestAnimationFrame'.");l=function(t){for(var e=document.createElement("div"),i=0;i<t.length;i++)if(t[i]in e.style)return t[i];throw Error("Browser doesn't support CSS3 transforms.")}(["transform","msTransform","MozTransform","WebkitTransform","OTransform"]),a&&document.documentElement.classList.add("is-touch"),e()}(),{create:n,detect:r,version:o}});